/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   contact.cpp                                        :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: joao-pol <joao-pol@student.42porto.com>    +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2024/12/03 09:59:39 by joao-pol          #+#    #+#             */
/*   Updated: 2024/12/03 10:07:56 by joao-pol         ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

#include "contact.hpp"

void	Contact::set_first_name(std::string str)
{
	this->_first_name = str;
}

void	Contact::set_last_name(std::string str)
{
	this->_last_name = str;
}

void	Contact::set_phone_number(std::string str)
{
	this->_phone_number = str;
}

void	Contact::set_nickname(std::string str)
{
	this->_nickname = str;
}

void	Contact::set_darkest_secret(std::string str)
{
	this->_darkest_secret = str;
}

std::string	Contact::get_first_name()
{
	return(this->_first_name);
}

std::string	Contact::get_last_name()
{
	return(this->_last_name);
}

std::string	Contact::get_nickname()
{
	return (this->_nickname);
}

std::string	Contact::get_phone_number()
{
	return(this->_phone_number);
}

std::string	Contact::get_darkest_secret()
{
	return(this->_darkest_secret);
}
/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   contact.hpp                                        :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: joao-pol <joao-pol@student.42porto.com>    +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2024/09/27 22:08:31 by joao-pol          #+#    #+#             */
/*   Updated: 2024/12/03 10:06:59 by joao-pol         ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

#ifndef CONTACT_HPP_
#define CONTACT_HPP_

# include <string>

class Contact
{
	private:
		std::string _index;
		std::string _first_name;
		std::string _last_name;
		std::string _nickname;
		std::string _phone_number;
		std::string _darkest_secret;
	public:
		void		set_first_name(std::string str);
		void		set_last_name(std::string str);
		void		set_phone_number(std::string str);
		void		set_nickname(std::string str);
		void		set_darkest_secret(std::string str);
		std::string	get_first_name();
		std::string	get_last_name();
		std::string	get_phone_number();
		std::string	get_nickname();
		std::string	get_darkest_secret();
};
#endif
/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   main.cpp                                           :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: joao-pol <joao-pol@student.42porto.com>    +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2024/12/03 09:59:34 by joao-pol          #+#    #+#             */
/*   Updated: 2024/12/12 17:14:26 by joao-pol         ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

#include "phonebook.hpp"


bool	getPrompt(std::string msg, std::string &var)
{
	std::cout << msg;
	std::getline(std::cin, var);
	if (std::cin.eof() || std::cin.fail() )
	{
		std::cout << std::endl <<"You pressed Ctrl + D, Program is Quitting" << std::endl;
		return false;
	}
	std::cout << std::endl;
	return true;
}

Contact	ft_create_contact()
{
	Contact temp;
	std::string firstname;
	std::string lastname;
	std::string nickname;
	std::string phone;
	std::string secret;
	std::cout << "Please enter contact details : "<< std::endl;
	getPrompt("First Name : ", firstname);
	if (firstname.length() == 0)
		return temp;
	getPrompt("Last Name : ", lastname);
	if (lastname.length() == 0)
		return temp;
	while (getPrompt("Phone Number : ", phone) && ((isNumber(phone) == 0 || phone.length() != 9))) {
		std::cout << "Phone number not valid. Must have 9 digits"<< std::endl;
		sleep(1);
		std::cout << "Please try again."<< std::endl;
		sleep(1);
	}
	if (phone.length() == 0)
		return temp;
	getPrompt("NickName : ", nickname);
	if (nickname.length() == 0)
		return temp;
	getPrompt("Darkest Secret : ", secret);
	if (secret.length() == 0)
		return temp;
	temp.set_first_name(firstname);
	temp.set_last_name(lastname);
	temp.set_phone_number(phone);
	temp.set_nickname(nickname);
	temp.set_darkest_secret(secret);
	return (temp);
}

int	main()
{
	Phonebook phonebook;

	handleSignal();
	std::cout << "\033[2J\033[H";
	std::string input;
	while (1)
	{
		do
		{
			ft_display();
			if (!getPrompt("Type your option : ", input))
				break;
			if (std::cin.fail()){
				std::cout << "Invalid input. Please enter ADD, SEARCH or EXIT" << std::endl, sleep(1);
				continue;
			}
			else if (input == "ADD")
			{
				Contact temp;
				temp = ft_create_contact();
				if (!std::cin.eof() && temp.get_first_name().length() == 0) {
					std::cout << "All contact field must be filled" << std::endl;
					continue;
				}
				phonebook.add(temp);
			}
			else if (input == "SEARCH")
			{
				std::string temp;
				getPrompt("Search [0 .. 7]: ", temp);
				if (isNumber(temp) == 1 && stoi(temp) < 8 && stoi(temp) >= 0)
				{
					std::cout << "Searching ..." << std::endl;
					phonebook.search(stoi(temp));
				}
				else
					std::cout << "Invalid Index, choose between 0 and 7" << std::endl;
			}
			else if (input == "EXIT")
				break ;
			else
				std::cout << "Invalid input." << std::endl, sleep(1);
		} while (input != "EXIT" && !std::cin.eof());
		std::cout << "Exiting.. Thank you!" << std::endl; return (0);
	}
}
# **************************************************************************** #
#                                                                              #
#                                                         :::      ::::::::    #
#    Makefile                                           :+:      :+:    :+:    #
#                                                     +:+ +:+         +:+      #
#    By: joao-pol <joao-pol@student.42porto.com>    +#+  +:+       +#+         #
#                                                 +#+#+#+#+#+   +#+            #
#    Created: 2024/12/03 09:59:30 by joao-pol          #+#    #+#              #
#    Updated: 2024/12/03 10:07:25 by joao-pol         ###   ########.fr        #
#                                                                              #
# **************************************************************************** #

CC = c++
NAME = phonebook
SRCS = main.cpp contact.cpp phonebook.cpp utils.cpp
CFLAGS = -Wall -Werror -Wextra -std=c++98 -g
OBJS = $(SRCS:.cpp=.o)


all : $(NAME)

$(NAME): $(OBJS)
	$(CC) $(CFLAGS) $(SRCS) -o $(NAME)

%.o: %.cpp
	@$(CC) $(CFLAGS) -c $< -o $@

clean :
	rm -fr *.o

fclean : clean
	rm -fr $(NAME)

re : fclean all

va : re
	valgrind --leak-check=full --show-leak-kinds=all ./phonebook

.PHONY : all fclean re
/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   phonebook.cpp                                      :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: joao-pol <joao-pol@student.42porto.com>    +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2024/12/03 09:59:46 by joao-pol          #+#    #+#             */
/*   Updated: 2024/12/12 17:03:42 by joao-pol         ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

#include "contact.hpp"
#include "phonebook.hpp"
#include <iomanip>
#include <iostream>
#include <ostream>
#include <sstream>
#include <string>

Phonebook::Phonebook()
{
	this->_index = 0;
}
void Phonebook::add(Contact contact)
{
	this->_contacts[_index] = contact;
	this->_index = (this->_index + 1) % 8;
}

std::string Format(std::string str)
{
	if (str.length() > 10)
		return str.substr(0, 9) + '.';
	std::ostringstream formatted;
	formatted << std::right << std::setfill(' ') << std::setw(10) << str;
	return (formatted.str());
}

void Phonebook::search(int index)
{
	if (this->_contacts[index].get_first_name().length() == 0)
		std::cout << "No contact Found!" << std::endl;
	else
	{
		std::cout << " ___________________________________________ " << std::endl;
		std::cout << "|  Details of contact found                 |" << std::endl;
		std::cout << "|first_name|_last_name|phone_no.|__nickname_| " << std::endl;
		std::cout << "|"<<Format(this->_contacts[index].get_first_name());
		std::cout << "|"<<Format(this->_contacts[index].get_last_name());
		std::cout << "|"<<Format(this->_contacts[index].get_nickname());
		std::cout << "|"<<Format(this->_contacts[index].get_phone_number()) << "|"<< std::endl;
		std::cout  <<"|___________________________________________| " << std::endl;
	}
}

Contact Phonebook::get_contact(int index)
{
	return (this->_contacts[index]);
}

std::string FormatColumn(std::string& str)
{
	if (str.length() > 10)
		return str.substr(0, 9) + '.';
	std::ostringstream formatted;
	formatted << std::right << std::setw(10) << str;
	return (formatted.str());
}
/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   phonebook.hpp                                      :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: joao-pol <joao-pol@student.42porto.com>    +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2024/09/23 23:57:57 by joao-pol          #+#    #+#             */
/*   Updated: 2024/12/12 17:22:44 by joao-pol         ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

#ifndef PHONEBOOK_HPP_
#define PHONEBOOK_HPP_

#include "utils.hpp"
#include "contact.hpp"

#include <cstdlib>
#include <cctype>
#include <csignal>
#include <iostream>
#include <sstream>


class Phonebook
{
	private:
		Contact _contacts[8];
		int		_index;
	public:
		Phonebook(void);
		void	add(Contact contact);
		void	search(int index);
		void	print(Contact contact);
		Contact	get_contact(int index);
};
#endif //PHONEBOOK_HPP_
/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   utils.cpp                                          :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: joao-pol <joao-pol@student.42porto.com>    +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2024/12/12 16:52:46 by joao-pol          #+#    #+#             */
/*   Updated: 2024/12/12 17:21:02 by joao-pol         ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

#include <iostream>
#include <csignal>
#include <sstream>

void	handleSignal(void)
{
	signal(SIGINT, SIG_IGN);
	signal(SIGQUIT, SIG_IGN);
}

int	stoi(std::string & s)
{
	int	i;
	std::istringstream(s) >> i;
	return i;
}

bool isNumber(std::string str)
{
	for (int i = 0; i < (int)str.length() ;i++)
	{
		if (std::isdigit(str[i]) == 0)
			return false;
	}
	return true;
}

void	ft_display()
{
	std::cout << " ___________________________________________ " << std::endl;
	std::cout << "|  Welcome to 90's Phonebook                |" << std::endl;
	std::cout << "|___________________________________________|" << std::endl;
	std::cout << "|   To Add Contact type ADD                 |" << std::endl;
	std::cout << "|___________________________________________|" << std::endl;
	std::cout << "|   To Search Contact type SEARCH           |" << std::endl;
	std::cout << "|___________________________________________|" << std::endl;
	std::cout << "|  For Exiting type EXIT                    |" << std::endl;
	std::cout << "|___________________________________________|" << std::endl;
}
/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   utils.hpp                                          :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: joao-pol <joao-pol@student.42porto.com>    +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2024/12/12 17:21:13 by joao-pol          #+#    #+#             */
/*   Updated: 2024/12/12 17:22:23 by joao-pol         ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

#ifndef UTILS_HPP_
#define UTILS_HPP_

# include <iostream>
# include <csignal>
# include <sstream>

void	handleSignal(void);
int		stoi(std::string & s);
bool	isNumber(std::string str);
void	ft_display(void);
#endif 

NAME = megaphone
SRCS = megaphone.cpp
FLAGS = -Wall -Werror -Wextra -std=c++98

all : $(NAME)
	c++ $(FLAGS) $(SRCS) -o $(NAME)

fclean :
	rm -fr $(NAME)

re : fclean all

.PHONY : all fclean re
/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   megaphone.cpp                                      :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: joao-pol <joao-pol@student.42porto.com>    +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2024/09/24 16:05:08 by joao-pol          #+#    #+#             */
/*   Updated: 2024/09/24 16:05:15 by joao-pol         ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

#include <cctype>
#include <iostream>
int	main(int argc, char *argv[])
{
	int i = 0;
	int j = 1;

	if (argc < 2)
		return (std::cout << "* LOUD AND UNBEARABLE NOISE *" << std::endl, 1);
	while (argv[j])
	{
		while (argv[j][i])
			std::cout << (char)std::toupper(argv[j][i++]);
		i = 0;
		j++;
	}
	std::cout << std::endl;
	return (0);
}
